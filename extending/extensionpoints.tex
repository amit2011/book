\chapter{How to Use MATSim Extensions \who{Zilske}}
\label{ch:extensionpoints}
% ##################################################################################################################
\hfill \textbf{Authors:} Michael Zilske

\kai{M.E.\ ist das hier vor allem die ``script''-Syntax, um die ``contribs'' einzubinden. Eigene Extensions kommen m.E.\ später, entweder in ``contributing to MATSim'', oder wir nehmen das dort raus.  (Wir wollen ``contributions to MATSim'' doch als Nutzer der extension points, und nicht immer gleich als Leute, die den core anfassen, oder?)}

\kai{Habe den Titel schonmal entsprechend angepasst (war vorher ``how to extend MATSim'').}

\ah{Evtl. würde ich dann doch dafür plädieren ``contributing to MATSim'' nach hier vorne zu verschieben. Damit wäre dann klar: MATSim wird nur an den Extensions-Points ``penetriert''. Bin mittlerweile überzeugt, dass Core-Anfassen im Buch gar nicht vorkommen sollte ... andere Leserschaft.}

\ah{Ah gerade gesehen: so ähnlich beschreibst du das ja im Kommentar zum ``development chapter''. Hätte das schon lange vor die ``extension points'' gezogen, wenn es nur nicht so (irgendwie notwendigerweise) ``theoretisch'' wäre. Vermute, dass uns Leser abspringen, wenn wir (ich) zuerst ellenlang beschreibe(n), wie der Development Process funktioniert, bevor man endlich verrät, wie man denn nun konkret andocken kann.}

\begin{center} \includegraphics[width=0.25\textwidth, angle=0]{figures/MATSimBook.png} \end{center}

% ##################################################################################################################
\section{Different Users of MATSim}
User (jar + config + modules which can be added through config)\\
API-User (code + modules which need coding (via API) \\
(Core developer) \\

% ##################################################################################################################
\section{MATSim Extension Points}

% ##################################################################################################################
\section{Config File}
\label{sec:config}


% ##################################################################################################################
\section{Events}
\label{sec:events}

COPIED FROM USER GUIDE

``
\subsection{Mobility Simulation Events}

The mobility simulation moves the agents around in the virtual world according to their plans and within the bounds of the ``simulated reality''. The mobility simulation documents its moves with so-called ``Events''. These events are small pieces of information describing the action of an object at a specific time. Examples of such events can be:

    An agent finishes an activity
    An agent starts a trip
    A vehicle enters a road segment
    A vehicle leaves a road segment
    An agent bordes a public transport vehicle
    An agent arrives at a location
    An agent starts an activity

Each event has a timestamp, a type, and additional attributes required to describe the action like the agent's id, a link id, an activity type or other data. In theory, it should be possible to replay the mobility simulation just by the information stored in the events. While plans describe the agents' plan for a day, the events describe how the agents' day actually was (according to the simulation).

As the events are so basic, each agent typically generates hundreds of events during one execution of a mobility simulation. In total, the number of events generated by a mobility simulation can easily reach a million or more, with large simulations even generating more than a billion events. But as the events really describe all the details from the execution of the plans, it is possible to extract mostly any kind of aggregated data one is interested in. Practically all analyses of MATSim simulations make use of events to calculate some data. Examples of such analyses are the average duration of an activity, average trip duration or distance, mode shares per time window, number of passengers in specific transit lines and many more.

The scoring of the executed plans makes use of events to find out how much time agents spent at activities or for traveling. Some replanning modules might make use of events as well: The router for example can use the information contained in events to figure out what links are jammed at certain times and route agents around that jam when creating new plans. 
``

% ##################################################################################################################
\section{Listeners}

% ##################################################################################################################
\section{Personalized Controler}

% ##################################################################################################################
\section{Inheritance}

% ##################################################################################################################
\section{MATSim Architecture}

% ##################################################################################################################
\section{Getting an Building the Source Code}
http://matsim.org/docs/devguide/development-environment

% ##################################################################################################################
